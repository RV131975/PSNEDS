<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>PSNE â€¢ Painel</title>
<link rel="preconnect" href="https://api.allorigins.win">
<link rel="preconnect" href="https://api.coingecko.com">
<link rel="preconnect" href="https://api.exchangerate.host">
<link rel="preconnect" href="https://query1.finance.yahoo.com">
<link rel="preconnect" href="https://api.open-meteo.com">
<style>
  :root{
    --bg:#0b1b2b; --panel:#0e2134; --muted:#7ea0c9; --text:#e8f0fa;
    --accent:#4cc0ff; --ok:#36c16b; --bad:#e35b5b;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; color:var(--text);
    font-family: Inter, Roboto, "Segoe UI", system-ui, -apple-system, sans-serif;
    background: radial-gradient(1200px 800px at 70% 30%, #0e2a44 0%, #0b1b2b 60%) fixed;
  }
  .wrap{
    min-height:100vh; padding:24px; display:grid; gap:18px;
    grid-template-rows: 92px auto 64px; /* header â€¢ grid â€¢ ticker */
  }

  /* HEADER */
  header{
    display:grid; grid-template-columns: auto 1fr auto auto; align-items:center; gap:14px;
    border:1px solid rgba(255,255,255,.08); border-radius:14px; padding:10px 14px;
    background:rgba(255,255,255,.03);
  }
  header img{ height:56px; width:56px; object-fit:contain }
  .brand{ font-size:22px; font-weight:800; letter-spacing:.06em }
  .clock{ margin-left:auto; text-align:right }
  .clock .time{ font-size:28px; font-weight:800 }
  .clock .date{ font-size:12px; color:var(--muted) }
  .weather{
    display:flex; align-items:center; gap:10px;
    background:var(--panel); border:1px solid rgba(255,255,255,.08);
    border-radius:12px; padding:8px 12px; min-width:220px;
  }
  .w-ico{ font-size:22px } .w-temp{ font-weight:800; font-size:18px }
  .w-city{ font-size:12px; color:var(--muted) }

  /* GRID (5 blocos) */
  .grid{
    display:grid; gap:18px;
    grid-template-columns: 1.2fr 1fr 1fr;
    grid-auto-rows: minmax(180px, auto);
  }
  .panel{
    background:rgba(255,255,255,.03); border:1px solid rgba(255,255,255,.08);
    border-radius:16px; padding:16px; display:flex; flex-direction:column; gap:12px;
    min-height:260px;
  }
  .panel h3{ margin:0; font-size:13px; letter-spacing:.12em; text-transform:uppercase; color:var(--muted) }
  .panel .sub{ font-size:12px; color:var(--muted) }

  /* Finance */
  .quotes-grid{ display:grid; gap:14px; grid-template-columns: repeat(2, minmax(220px,1fr)) }
  .quote{ background:var(--panel); border:1px solid rgba(255,255,255,.08); border-radius:12px; padding:10px 12px }
  .quote .top{ display:flex; justify-content:space-between; align-items:center; margin-bottom:8px }
  .quote strong{ font-size:14px } .quote small{ color:var(--muted) }
  .quote .fallback{ display:none; font-variant-numeric:tabular-nums }
  .delta{ font-size:12px } .delta.up{ color:var(--ok) } .delta.down{ color:var(--bad) }

  /* News lists */
  .news-list{ display:grid; gap:10px; grid-auto-rows:minmax(0,1fr); overflow:auto; padding-right:4px }
  .news-item{
    display:grid; grid-template-columns: 110px 1fr; gap:12px; align-items:center;
    background:var(--panel); border:1px solid rgba(255,255,255,.06); border-radius:12px; padding:10px;
  }
  .news-item img{ width:110px; height:68px; object-fit:cover; border-radius:8px; background:#17314b }
  .news-item h4{ margin:0; font-size:14px }
  .news-item p{ margin:4px 0 0; font-size:12px; color:var(--muted) }
  .news-hero{ font-size:18px; font-weight:800; margin:6px 0 4px }
  .source-badge{ font-size:12px; color:var(--muted) }

  /* Sobre */
  .about{ display:grid; grid-template-columns: 120px 1fr; gap:14px; align-items:center }
  .about img{ width:100%; height:auto } .about p{ margin:0; line-height:1.5 }
  ul.check{ margin:8px 0 0 18px; padding:0; color:var(--muted) }

  /* FOOTER TICKER */
  footer.ticker{
    position:relative; overflow:hidden;
    border:1px solid rgba(255,255,255,.1); background:rgba(255,255,255,.06); border-radius:12px;
  }
  .marquee{ position:absolute; white-space:nowrap; padding:20px; font-size:18px; color:#dbe8f8; animation:slide 28s linear infinite }
  @keyframes slide{ from{transform:translateX(100%)} to{transform:translateX(-100%)} }

  ::-webkit-scrollbar{height:8px;width:10px} ::-webkit-scrollbar-thumb{background:rgba(255,255,255,.12);border-radius:8px}
</style>
</head>
<body>
<div class="wrap">

  <!-- HEADER (logo â€¢ brand â€¢ clock â€¢ weather) -->
  <header>
    <img src="./logo-branco-transparente-quadrado.png" alt="PSNE">
    <div class="brand">PSNE â€¢ Painel de InformaÃ§Ãµes</div>
    <div class="clock">
      <div class="time" id="nowTime">--:--</div>
      <div class="date" id="nowDate">---</div>
    </div>
    <div class="weather" title="Atualiza a cada ~5 min">
      <div class="w-ico" id="wIcon">â›…</div>
      <div class="w-temp" id="wTemp">--Â°</div>
      <div class="w-city" id="wCity">Localizandoâ€¦</div>
    </div>
  </header>

  <!-- GRID (5 BLOCOS) -->
  <section class="grid">

    <!-- 1) FINANCEIROS -->
    <section class="panel" id="panel-fin">
      <h3>Financeiros</h3>
      <div class="sub">USD/BRL â€¢ BTC/USD â€¢ ANET â€¢ SONDA</div>
      <div class="quotes-grid">
        <!-- USD/BRL -->
        <div class="quote">
          <div class="top"><strong>USD / BRL</strong><small id="src-usdbrl">Investing.com</small></div>
          <!-- COLE aqui o widget do Investing.com (USD/BRL) se desejar -->
          <div id="investing-usdbrl"></div>
          <div class="fallback" id="fb-usdbrl">Ãšltimo: <b id="usdbrl-val">--</b> â€¢ Î” <b id="usdbrl-delta" class="delta">â€”</b></div>
        </div>
        <!-- BTC/USD -->
        <div class="quote">
          <div class="top"><strong>BTC / USD</strong><small id="src-btcusd">Investing.com</small></div>
          <!-- COLE aqui o widget do Investing.com (BTC/USD) se desejar -->
          <div id="investing-btcusd"></div>
          <div class="fallback" id="fb-btcusd">Ãšltimo: <b id="btcusd-val">--</b> â€¢ Î” 24h <b id="btcusd-delta" class="delta">â€”</b></div>
        </div>
        <!-- ANET -->
        <div class="quote">
          <div class="top"><strong>Arista Networks â€” ANET</strong><small id="src-anet">Investing.com</small></div>
          <!-- COLE aqui o widget do Investing.com (ANET) se desejar -->
          <div id="investing-anet"></div>
          <div class="fallback" id="fb-anet">Ãšltimo: <b id="anet-val">--</b> â€¢ Î” <b id="anet-delta" class="delta">â€”</b></div>
        </div>
        <!-- SONDA -->
        <div class="quote">
          <div class="top"><strong>SONDA S.A. â€” SONDA.SN</strong><small id="src-sonda">Investing.com</small></div>
          <!-- COLE aqui o widget do Investing.com (SONDA) se desejar -->
          <div id="investing-sonda"></div>
          <div class="fallback" id="fb-sonda">Ãšltimo: <b id="sonda-val">--</b> â€¢ Î” <b id="sonda-delta" class="delta">â€”</b></div>
        </div>
      </div>
    </section>

    <!-- 2) INFORMAÃ‡Ã•ES DE TECNOLOGIA -->
    <section class="panel" id="panel-tech">
      <h3>InformaÃ§Ãµes de Tecnologia</h3>
      <div class="sub source-badge" id="tech-src">TechCrunch â€¢ The Verge â€¢ Ars</div>
      <div class="news-hero" id="tech-hero">Carregandoâ€¦</div>
      <div class="news-list" id="tech-list"></div>
    </section>

    <!-- 3) TELECOMUNICAÃ‡Ã•ES -->
    <section class="panel" id="panel-telecom">
      <h3>TelecomunicaÃ§Ãµes</h3>
      <div class="sub source-badge" id="tel-src">The Register â€” Networks</div>
      <div class="news-hero" id="tel-hero">Carregandoâ€¦</div>
      <div class="news-list" id="tel-list"></div>
    </section>

    <!-- 4) DATA CENTER -->
    <section class="panel" id="panel-dc">
      <h3>Data Center</h3>
      <div class="sub source-badge" id="dc-src">DataCenterDynamics â€¢ Data Center Knowledge</div>
      <div class="news-hero" id="dc-hero">Carregandoâ€¦</div>
      <div class="news-list" id="dc-list"></div>
    </section>

    <!-- 5) SOBRE A PSNE -->
    <section class="panel" id="panel-about">
      <h3>Sobre a PSNE</h3>
      <div class="about">
        <img src="./logo-branco-transparente-quadrado.png" alt="PSNE">
        <div>
          <p><strong>PS Network Experts (PSNE)</strong> â€” consultoria e integradora <em>technology-first</em> para operadoras, ISPs e empresas. Foco em <strong>redes carrier-class</strong>, <strong>data centers</strong>, <strong>observabilidade com IA</strong>, <strong>NOC/SOC</strong> e <strong>automaÃ§Ã£o</strong>.</p>
          <ul class="check">
            <li>Arquiteturas IP/MPLS, BNG/CGNAT, SRv6, Telco Cloud</li>
            <li>Cloud-scale switching, EVPN/VXLAN, automaÃ§Ã£o GitOps/API-first</li>
            <li>PSNE Observer (AIOps/FinOps), GAIO DataOS (Data Lake/Analytics)</li>
            <li>ServiÃ§os 24Ã—7, SLAs orientados a valor, runbooks inteligentes</li>
          </ul>
        </div>
      </div>
    </section>

  </section>

  <!-- FOOTER TICKER -->
  <footer class="ticker">
    <div class="marquee" id="ticker">
      PSNE â€¢ 100% Tech, 100% Cliente â€¢ Cloud-Scale â€¢ Observabilidade com IA â€¢ Zero-Touch Ops â€¢ SRv6 â€¢ EVPN/VXLAN â€¢ NOC 24Ã—7 â€¢ DataOps â€¢ FinOps â€¢ SeguranÃ§a by-design â€¢ Edge-to-Cloud
    </div>
  </footer>
</div>

<script>
(() => {
  /* ========= RELÃ“GIO ========= */
  function startClock(){
    const time = document.getElementById("nowTime");
    const date = document.getElementById("nowDate");
    const tz = Intl.DateTimeFormat().resolvedOptions().timeZone;
    const tick = () => {
      const d = new Date();
      time.textContent = d.toLocaleTimeString('pt-BR',{hour:'2-digit',minute:'2-digit'});
      date.textContent = d.toLocaleDateString('pt-BR',{weekday:'long',day:'2-digit',month:'long',year:'numeric', timeZone: tz});
    };
    tick(); setInterval(tick, 1000);
  }

  /* ========= CLIMA (Open-Meteo, sem API key) ========= */
  function wIcon(code, isDay){
    const sun="â˜€ï¸", moon="ðŸŒ™", cloud="â›…", over="â˜ï¸", rain="ðŸŒ§ï¸", tstorm="â›ˆï¸", snow="â„ï¸", fog="ðŸŒ«ï¸";
    const day=isDay?sun:moon;
    if ([0].includes(code)) return day;
    if ([1,2].includes(code)) return cloud;
    if ([3].includes(code)) return over;
    if ([45,48].includes(code)) return fog;
    if ([51,53,55,56,57,61,63,65,80,81,82].includes(code)) return rain;
    if ([66,67,71,73,75,77,85,86].includes(code)) return snow;
    if ([95,96,99].includes(code)) return tstorm;
    return "â›…";
  }
  async function getCoords(){
    return new Promise(resolve=>{
      const fallback = { name:"Miami, FL", lat:25.7617, lon:-80.1918, tz:"America/New_York" };
      if (!navigator.geolocation) return resolve(fallback);
      const done = (lat,lon,name)=>resolve({lat,lon,name,tz:Intl.DateTimeFormat().resolvedOptions().timeZone||fallback.tz});
      navigator.geolocation.getCurrentPosition(async p=>{
        const {latitude:lat, longitude:lon} = p.coords;
        try{
          const r = await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${lat}&longitude=${lon}&localityLanguage=en`);
          const j = await r.json(); const city = j.city || j.locality || j.principalSubdivision || "Local";
          done(lat,lon, city + (j.countryCode?`, ${j.countryCode}`:""));
        }catch{ done(lat,lon,fallback.name); }
      }, ()=>done(fallback.lat, fallback.lon, fallback.name), {timeout:5000});
    });
  }
  async function loadWeather(){
    const wI=document.getElementById("wIcon"), wT=document.getElementById("wTemp"), wC=document.getElementById("wCity");
    try{
      const loc = await getCoords();
      const url = `https://api.open-meteo.com/v1/forecast?latitude=${loc.lat}&longitude=${loc.lon}&current_weather=true&timezone=${encodeURIComponent(loc.tz)}`;
      const j = await fetch(url).then(r=>r.json());
      const cw = j.current_weather;
      wI.textContent = wIcon(cw.weathercode, cw.is_day===1);
      wT.textContent = `${Math.round(cw.temperature)}Â°`;
      wC.textContent = loc.name;
    }catch{
      wI.textContent = "â›…"; wT.textContent = "â€”"; wC.textContent = "Indisp.";
    }
  }

  /* ========= FINANCEIROS (fallbacks) ========= */
  const fmt2 = new Intl.NumberFormat('pt-BR',{minimumFractionDigits:2, maximumFractionDigits:2});
  const fmt4 = new Intl.NumberFormat('pt-BR',{minimumFractionDigits:4, maximumFractionDigits:4});
  const setDelta = (el, pct) => {
    if (pct==null || Number.isNaN(pct)){ el.textContent="â€”"; el.className="delta"; return; }
    const s=pct>0?"+":""; el.textContent = s + fmt2.format(pct) + "%";
    el.className = "delta " + (pct>0?"up":pct<0?"down":"");
  };
  function needsFallback(id){ const el=document.getElementById(id); return new Promise(r=>setTimeout(()=>r(!el || el.childElementCount===0), 2500)); }

  async function fxUsdBrl(){
    const today = await fetch("https://api.exchangerate.host/latest?base=USD&symbols=BRL").then(r=>r.json());
    const curr = today?.rates?.BRL;
    const d = new Date(); d.setDate(d.getDate()-1);
    const y = d.toISOString().slice(0,10);
    const prevJ = await fetch(`https://api.exchangerate.host/${y}?base=USD&symbols=BRL`).then(r=>r.json());
    const prev = prevJ?.rates?.BRL;
    return { value: curr, delta: prev ? ((curr-prev)/prev*100) : null };
  }
  async function btcUsd(){
    const now = await fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd",{cache:"no-store"}).then(r=>r.json());
    const price = now?.bitcoin?.usd;
    const hist = await fetch("https://api.coingecko.com/api/v3/coins/bitcoin/market_chart?vs_currency=usd&days=1").then(r=>r.json());
    const series = hist?.prices||[]; const first = series.length? series[0][1] : null;
    return { value: price, delta: (first && price)? ((price-first)/first*100):null };
  }
  async function yahooTicker(ticker){
    const j = await fetch(`https://query1.finance.yahoo.com/v8/finance/chart/${encodeURIComponent(ticker)}?range=1d&interval=1m`).then(r=>r.json());
    const res = j.chart?.result?.[0];
    const last = res?.meta?.regularMarketPrice ?? (res?.indicators?.quote?.[0]?.close?.slice(-1)[0]);
    const open = res?.meta?.chartPreviousClose ?? res?.indicators?.quote?.[0]?.close?.[0];
    return { value: last, delta: (open && last)? ((last-open)/open*100):null };
  }
  async function updateFinance(){
    if (await needsFallback("investing-usdbrl")){
      document.getElementById("fb-usdbrl").style.display="block";
      document.getElementById("src-usdbrl").textContent="Fallback: exchangerate.host";
      try{ const r=await fxUsdBrl(); document.getElementById("usdbrl-val").textContent=fmt4.format(r.value); setDelta(document.getElementById("usdbrl-delta"), r.delta);}catch{}
    }
    if (await needsFallback("investing-btcusd")){
      document.getElementById("fb-btcusd").style.display="block";
      document.getElementById("src-btcusd").textContent="Fallback: CoinGecko";
      try{ const r=await btcUsd(); document.getElementById("btcusd-val").textContent=fmt2.format(r.value); setDelta(document.getElementById("btcusd-delta"), r.delta);}catch{}
    }
    if (await needsFallback("investing-anet")){
      document.getElementById("fb-anet").style.display="block";
      document.getElementById("src-anet").textContent="Fallback: Yahoo Finance";
      try{ const r=await yahooTicker("ANET"); document.getElementById("anet-val").textContent=fmt2.format(r.value); setDelta(document.getElementById("anet-delta"), r.delta);}catch{}
    }
    if (await needsFallback("investing-sonda")){
      document.getElementById("fb-sonda").style.display="block";
      document.getElementById("src-sonda").textContent="Fallback: Yahoo Finance";
      try{ const r=await yahooTicker("SONDA.SN"); document.getElementById("sonda-val").textContent=fmt2.format(r.value); setDelta(document.getElementById("sonda-delta"), r.delta);}catch{}
    }
  }

  /* ========= FEEDS (RSS via proxy) ========= */
  const PROXY = (u)=>`https://api.allorigins.win/raw?url=${encodeURIComponent(u)}`;
  const clean = s => (s||"").replace(/<[^>]+>/g," ").replace(/\s+/g," ").trim();
  const pickImg = (title)=>`https://picsum.photos/seed/${encodeURIComponent((title||"img").slice(0,24))}/240/140`;

  async function fetchRSS(url){
    const txt = await fetch(PROXY(url), {cache:"no-store"}).then(r=>r.text());
    const xml = new DOMParser().parseFromString(txt, "text/xml");
    const isAtom = xml.documentElement.nodeName.toLowerCase().includes("feed");
    const items=[];
    if (isAtom){
      xml.querySelectorAll("entry").forEach(e=>{
        items.push({title:e.querySelector("title")?.textContent?.trim(),
          link:e.querySelector("link")?.getAttribute("href"),
          desc:clean(e.querySelector("summary")?.textContent || e.querySelector("content")?.textContent),
          pub:e.querySelector("updated, published")?.textContent? new Date(e.querySelector("updated, published").textContent):null});
      });
    } else {
      xml.querySelectorAll("item").forEach(it=>{
        items.push({title:it.querySelector("title")?.textContent?.trim(),
          link:it.querySelector("link")?.textContent?.trim(),
          desc:clean(it.querySelector("description")?.textContent || it.querySelector("content\\:encoded")?.textContent),
          pub:it.querySelector("pubDate")?.textContent? new Date(it.querySelector("pubDate").textContent):null});
      });
    }
    items.sort((a,b)=>(b.pub?.getTime()||0)-(a.pub?.getTime()||0));
    return items.slice(0,12);
  }

  const FEEDS_TECH = [
    "https://techcrunch.com/feed/",
    "https://www.theverge.com/rss/index.xml",
    "https://feeds.arstechnica.com/arstechnica/index"
  ];
  const FEEDS_TELECOM = [
    "https://www.theregister.com/networks/headlines.atom"
  ];
  const FEEDS_DC = [
    "https://www.datacenterdynamics.com/en/rss/",
    "https://www.datacenterknowledge.com/rss"
  ];

  async function loadCategory(feeds, heroEl, listEl, srcEl, srcText){
    srcEl.textContent = srcText;
    try{
      const results = (await Promise.allSettled(feeds.map(fetchRSS)))
        .filter(r=>r.status==="fulfilled").flatMap(r=>r.value);
      if (!results.length){ heroEl.textContent="Sem itens agora"; listEl.innerHTML=""; return; }
      const seen=new Set();
      const uniq=results.filter(x=>{const k=x.link||x.title; if(!k||seen.has(k))return false; seen.add(k); return true;});
      heroEl.textContent = uniq[0].title || "Destaque";
      listEl.innerHTML = uniq.slice(0,8).map(x=>`
        <article class="news-item">
          <img src="${pickImg(x.title)}" alt="">
          <div>
            <h4><a href="${x.link||'#'}" target="_blank" rel="noopener" style="color:var(--text);text-decoration:none">${x.title||"Sem tÃ­tulo"}</a></h4>
            <p>${(x.desc||"").slice(0,120)}</p>
          </div>
        </article>`).join("");
    }catch{ heroEl.textContent="Erro ao carregar"; listEl.innerHTML=""; }
  }

  function initNews(){
    loadCategory(FEEDS_TECH, document.getElementById("tech-hero"), document.getElementById("tech-list"), document.getElementById("tech-src"), "TechCrunch â€¢ The Verge â€¢ Ars");
    loadCategory(FEEDS_TELECOM, document.getElementById("tel-hero"), document.getElementById("tel-list"), document.getElementById("tel-src"), "The Register â€” Networks");
    loadCategory(FEEDS_DC, document.getElementById("dc-hero"), document.getElementById("dc-list"), document.getElementById("dc-src"), "DataCenterDynamics â€¢ Data Center Knowledge");
  }

  /* ========= TICKER velocidade dinÃ¢mica ========= */
  function initTicker(){
    const t = document.getElementById("ticker");
    const upd = () => { const w = t.scrollWidth || 2000; t.style.animationDuration = `${Math.max(18, w/80)}s`; };
    new ResizeObserver(()=>upd()).observe(t); upd();
  }

  /* ========= BOOT ========= */
  document.addEventListener("DOMContentLoaded", ()=>{
    startClock();
    loadWeather(); setInterval(loadWeather, 5*60*1000);      // clima
    updateFinance(); setInterval(updateFinance, 5*60*1000);  // finanÃ§as
    initNews(); setInterval(initNews, 15*60*1000);           // notÃ­cias
    initTicker();
  });
})();
</script>
</body>
</html>
